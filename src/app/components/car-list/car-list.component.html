<div class="min-h-screen bg-gray-50" style="padding-top: 73px;">
  <app-header
    [viewMode]="viewMode"
    (viewModeToggled)="onViewModeToggled()">
  </app-header>

  <div class="flex">
    <app-sidebar>
    </app-sidebar>

    <div class="flex-1 p-6" style="margin-left: 256px;">
      <div class="mb-6 flex items-center gap-4">
        <div class="flex-1 relative">
          <input
            type="text"
            [(ngModel)]="searchQuery"
            (input)="onSearch()"
            placeholder="Rechercher une voiture..."
            class="w-full px-4 py-2.5 pl-10 border-2 border-gray-200 focus:outline-none focus:border-red-600 transition-colors text-gray-900">
          <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>

        @if (isAuthenticated$ | async) {
          <button
            (click)="openModal()"
            class="bg-green-600 text-white px-4 py-2.5 hover:bg-green-700 transition-colors font-medium focus:outline-none">
            Ajouter une voiture
          </button>
        }

        <div class="flex items-center border-2 border-gray-200 bg-white">
          <button
            (click)="setAvailabilityFilter(false)"
            [class]="!showAvailableOnly ? 'bg-gradient-to-r from-red-600 to-red-700 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'"
            class="px-4 py-2.5 font-medium transition-colors focus:outline-none">
            Tous
          </button>
          <button
            (click)="setAvailabilityFilter(true)"
            [class]="showAvailableOnly ? 'bg-gradient-to-r from-red-600 to-red-700 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'"
            class="px-4 py-2.5 font-medium transition-colors focus:outline-none">
            Disponibles
          </button>
        </div>
      </div>

      @if (loading$ | async) {
        <div class="text-center py-12">
          <p class="text-gray-500 text-lg">Chargement...</p>
        </div>
      } @else {
        @if (viewMode === 'grid') {
          <app-car-grid></app-car-grid>
        }

        @if (viewMode === 'table') {
          <app-car-table></app-car-table>
        }

        @if ((cars$ | async)?.length === 0) {
          <div class="text-center py-12">
            <p class="text-gray-500 text-lg">Aucune voiture trouvée avec les filtres sélectionnés.</p>
          </div>
        }
      }
    </div>
  </div>

  <!-- Modal -->
  @if (showModal) {
    <app-car-form-modal (close)="closeModal()"></app-car-form-modal>
  }
</div>
